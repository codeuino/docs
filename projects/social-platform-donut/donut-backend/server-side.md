# Server Side

## Before starting the application <a id="before-starting-the-application"></a>

The user should add a credential file in the config folder, the credential file should have a structure like

```text
module.exports = {  secret:'secret_key',  oauth: {    clientID: "GOOGLE SECRET Client ID",    clientSecret: "google client secret"  },  db: 'DB URL',  github: {    clientID: 'Github Client ID',    clientSecret: 'Github Client Secret'  },  facebook: {    clientID: 'FB Client ID',    clientSecret: 'FB Client Secret'  },  VAPID_KEYS : {    Public: "Vapid Keys",    Private: "Vapid Keys"  }}
```

## Profile <a id="profile"></a>

In Donut, there are different collections for individual and organisations which are accessed with property `type` , in the authentication token server fetches two properties `user_id` and `type` , where data is retrieve accordingly from both collections.

```text
// user typeIndividual => 0Organisation => 1
```

```text
  type: {    type: Number,    required: true  },  googleId: {    type: String  },  githubId: {    type: String  },  name: {    type: String  },  profilepic: {    type: String  },  email: {    type: String,    unique: true    }  .  .  .
```

This endpoint allow users or organisation to fetch their own details

Headers

Authentication token contains user id and their type

```text
{    "name": "User's name",    "_id": "User's id",    "githubId": "github user id"}
```

```text
{    "msg":"User's doesn't exist"}
```

This endpoint let's user to follow other users.

Headers

Authentication token contains user id and their type.

Body Parameters

User id , who's getting followed

```text
{    "msg":"Some error occured"}
```

This endpoint let's user to add their device using subscription object for webpush notification.

Headers

Authentication token which contains user Id and type.

Body Parameters

This is subscription object which is generated by web push service at client side

This endpoint let user's to retrieve their projects and user details for project view.

Headers

Authentication Token

required

```text
{    "name": "Username",    "profilePic":"User pic",    "followersList":"[]",    "followingList":"[]",    .    .    .}
```

```text
{    "msg":"Failed to retreive user details"}
```

## Posts <a id="posts"></a>

User can add normal post with title and content, and content is supposed to be html.

**Schema**

```text
  user: {    type: ObjectId  },  userName: {    type: String  },  title: {    type: String,    required: true  },  content: {    type: String,    required: true  },  .  .  .
```

This endpoint let user add posts.

Headers

Authentication Tokem

required

```text
{    "success":"Successfully entered"}
```

```text
{    "msg" :"Failed to add post"}Th
```

This endpoint gets all posts in the response.

This endpoint let's user to update their posts

Body Parameters

ID of the post which needs to be updated

```text
{'success':'Post Updated'}
```

## Events <a id="events"></a>

This endpoint let user to manipulate events.

This endpoint let user or organisation to add event.

In Donut, user can also propose projects among other users, this model have more properties than other structures, including short description, languages used etc.

User can also import repos from github and add it as project in Donut.

This endpoint let user to add Project.

Body Parameters

Cover photo of the project

Array of languages used in the project

Content of the project, user can add html in it as well.

Short description of the project

Github link of the project

```text
{    msg:"Failed to add project"}
```

## Fetch Projects <a id="fetch-projects"></a>

/fetchProjects

This endpoint let user to fetch projects.

## aFetch Project <a id="afetch-project"></a>

/fetchProject

This endpoint let user to fetch details of a project specifically.

Body Parameters

Object Id of the project which needs to be fetched

```text
{    msg:'Failed to fetch project"}
```

This endpoint let user add comments on any project.

Body Parameters

Unique Id of the comments, generated from the client.

